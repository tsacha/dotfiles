- name: set hostname
  template:
    src: hostname.j2
    dest: /etc/hostname

- name: set hosts
  template:
    src: hosts.j2
    dest: /etc/hosts

- name: set default locale
  template:
    src: locale.conf.j2
    dest: /etc/locale.conf

- name: set locales
  template:
    src: locale.gen.j2
    dest: /etc/locale.gen
  notify:
    - reload locales

- meta: flush_handlers

- name: set timezone
  file:
    src: /usr/share/zoneinfo/Europe/Paris
    dest: /etc/localtime
    state: link

- name: set vconsole
  template:
    src: vconsole.conf.j2
    dest: /etc/vconsole.conf

- name: create local user
  user:
    uid: "{{ user.uid }}"
    name: "{{ user.name }}"
    group: "{{ user.group }}"
    home: "{{ user.home }}"
    groups: wheel,http,log,sys,rfkill

- name: makepkg configuration file
  template:
    src: makepkg.conf.j2
    dest: /etc/makepkg.conf
