{{ $color := "light" }}
{{ if eq .chezmoi.os "darwin" -}}
{{ if eq (output "osascript" "-e" "tell app \"System Events\" to tell appearance preferences to get dark mode" | trim) "false" -}}
{{ $color = "light" }}
{{ else if eq (output "osascript" "-e" "tell app \"System Events\" to tell appearance preferences to get dark mode" | trim) "true" -}}
{{ $color = "dark" }}
{{ end -}}
{{ else -}}
{{ if eq (output "gsettings" "get" "org.gnome.desktop.interface" "color-scheme" | trim) "'prefer-light'" -}}
{{ $color = "light" }}
{{ else if eq (output "gsettings" "get" "org.gnome.desktop.interface" "color-scheme" | trim) "'prefer-dark'" -}}
{{ $color = "dark" }}
{{ end -}}
{{ end -}}
set -s escape-time 0
set-option -g default-terminal "xterm-256color"
set-option -ga terminal-overrides ",xterm-256color:Tc"

set -g prefix M-q
bind M-t send-prefix
set -g mouse on
set-option -g status-interval 5
set-option -g automatic-rename on
set-option -g automatic-rename-format '#{b:pane_current_path}#{?#{==:#{pane_current_command},fish},, ▸ #{pane_current_command}}'

bind h split-window -h -c "#{pane_current_path}"
bind v split-window -v -c "#{pane_current_path}"

bind -n M-h select-pane -L
bind -n M-j select-pane -D
bind -n M-k select-pane -U
bind -n M-l select-pane -R

bind -n M-t new-window -a -c "#{pane_current_path}"
bind -n M-n next-window
bind -n M-r previous-window

set -g visual-activity off
set -g visual-bell off
set -g visual-silence off
setw -g monitor-activity off
set -g bell-action none

# Status bar styling
set-option -g status-style bg=default,fg=colour7
set -g status-position top
set -g status-justify left
set -g status-left-length 50
set -g status-right-length 100
set -g status-left ''
set -g status-right '#[fg=colour8]│ #[fg=colour6]%H:%M #[fg=colour8]│ #[fg=colour5]%d %b '
set -g window-status-separator ''
set -g window-status-current-style fg=colour4
set -g window-status-current-format " #[fg=colour4]● #[fg=colour7]#W "
set -g window-status-format " #[fg=colour8]◎ #W "
set -g window-status-activity-style fg=colour3
set -g window-status-bell-style fg=colour1

# Pane borders
set -g pane-border-style fg=colour8
set -g pane-active-border-style fg=colour4

# Message styling
set -g message-style bg=colour0,fg=colour4
set -g message-command-style bg=colour0,fg=colour6

# Pane number display
set -g display-panes-active-colour colour4
set -g display-panes-colour colour8
set -g display-panes-time 2000

# Clock mode
set -g clock-mode-colour colour4
set -g clock-mode-style 24

# Copy mode styling
set -g mode-style bg=colour4,fg=colour0

set -q mode-key vi
